<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="shabda" />
        <meta name="copyright" content="shabda" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="forms, markdown, " />

<meta property="og:title" content="Dynamic forms with Django "/>
<meta property="og:url" content="/dynamic-forms-with-django.html" />
<meta property="og:description" content="Newforms, (or forms now) are without doubt one of the coolest features of Django. (Of course after Admin, Localflavor, and many others). Here is some sample code. class EmployeeForm(forms.Form): name = forms.CharField() age = forms.IntegerField() resume = forms.FileField() Just this code gives you 1. A form which knows how to render itself as Html. 2. A form which knows how to validate data on the server side. 3. A form which knows how to show the relevant errors. However think of this scenario, You need to customise your form depending on values in the Database. What you want to do" />
<meta property="og:site_name" content="agiliq_blog" />
<meta property="og:article:author" content="shabda" />
<meta property="og:article:published_time" content="2008-10-10T09:16:05+05:30" />
<meta property="" content="2008-10-10T19:46:05+05:30" />
<meta name="twitter:title" content="Dynamic forms with Django ">
<meta name="twitter:description" content="Newforms, (or forms now) are without doubt one of the coolest features of Django. (Of course after Admin, Localflavor, and many others). Here is some sample code. class EmployeeForm(forms.Form): name = forms.CharField() age = forms.IntegerField() resume = forms.FileField() Just this code gives you 1. A form which knows how to render itself as Html. 2. A form which knows how to validate data on the server side. 3. A form which knows how to show the relevant errors. However think of this scenario, You need to customise your form depending on values in the Database. What you want to do">

        <title>Dynamic forms with Django  Â· agiliq_blog
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="/theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/css/custom.css" media="screen">
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="/"><span class=site-name>agiliq_blog</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href="">Home</a></li>
                            <li ><a href="/categories.html">Categories</a></li>
                            <li ><a href="/tags.html">Tags</a></li>
                            <li ><a href="/archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page-header span10 offset2">
    <h1><a href="/dynamic-forms-with-django.html"> Dynamic forms with Django  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            
            <p><a href="http://docs.djangoproject.com/en/dev/topics/forms/">Newforms</a>, (or forms now) are without doubt one of the coolest features of Django. (Of course after Admin, Localflavor, and many others). Here is some sample code.</p>
<div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">EmployeeForm</span><span class="p">(</span><span class="nx">forms</span><span class="p">.</span><span class="nx">Form</span><span class="p">)</span><span class="o">:</span>
    <span class="nx">name</span> <span class="o">=</span> <span class="nx">forms</span><span class="p">.</span><span class="nx">CharField</span><span class="p">()</span>
    <span class="nx">age</span> <span class="o">=</span> <span class="nx">forms</span><span class="p">.</span><span class="nx">IntegerField</span><span class="p">()</span>
    <span class="nx">resume</span> <span class="o">=</span> <span class="nx">forms</span><span class="p">.</span><span class="nx">FileField</span><span class="p">()</span>
</pre></div>


<p>Just this code gives you </p>
<ol>
<li>A form which knows how to render itself as Html.</li>
<li>A form which knows how to validate data on the server side.</li>
<li>A form which knows how to show the relevant errors.</li>
</ol>
<p>However think of this scenario, </p>
<p>You need to customise your form depending on values in the Database.</p>
<p>What you want to do is </p>
<div class="highlight"><pre><span></span><span class="kr">class</span> <span class="nx">EmployeeForm</span><span class="p">(</span><span class="nx">forms</span><span class="p">.</span><span class="nx">Form</span><span class="p">)</span><span class="o">:</span>
    <span class="nx">name</span> <span class="o">=</span> <span class="nx">forms</span><span class="p">.</span><span class="nx">CharField</span><span class="p">()</span>
    <span class="s2">&quot;Show more fields depending on the Values in DB for a specific employees.&quot;</span>
    <span class="err">#</span><span class="p">....</span>
    <span class="err">#</span><span class="p">....</span>
    <span class="err">#</span><span class="p">....</span>
</pre></div>


<p>You can do this without resorting to any black magic. Here is the code to do so,</p>
<div class="highlight"><pre><span></span><span class="err">#</span><span class="k">in</span> <span class="nx">models</span><span class="p">.</span><span class="nx">py</span>

<span class="nx">type_mapping</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;CharField&#39;</span><span class="o">:</span><span class="nx">forms</span><span class="p">.</span><span class="nx">CharField</span><span class="p">(</span><span class="nx">max_length</span> <span class="o">=</span> <span class="mi">100</span><span class="p">),</span> <span class="s1">&#39;TextField&#39;</span><span class="o">:</span> <span class="nx">forms</span><span class="p">.</span><span class="nx">CharField</span><span class="p">(</span><span class="nx">widget</span> <span class="o">=</span> <span class="nx">forms</span><span class="p">.</span><span class="nx">Textarea</span><span class="p">),</span>
        <span class="s1">&#39;BooleanField&#39;</span><span class="o">:</span><span class="nx">forms</span><span class="p">.</span><span class="nx">BooleanField</span><span class="p">(</span><span class="nx">required</span> <span class="o">=</span> <span class="nx">False</span><span class="p">),</span>
        <span class="s1">&#39;URLField&#39;</span><span class="o">:</span> <span class="nx">forms</span><span class="p">.</span><span class="nx">URLField</span><span class="p">(),</span> <span class="s1">&#39;EmailField&#39;</span><span class="o">:</span> <span class="nx">forms</span><span class="p">.</span><span class="nx">EmailField</span><span class="p">()</span>
        <span class="p">}</span>

<span class="kr">class</span> <span class="nx">EmployeeFieldModel</span><span class="p">(</span><span class="nx">models</span><span class="p">.</span><span class="nx">Model</span><span class="p">)</span><span class="o">:</span>
    <span class="s2">&quot;Model for employee form fields for a specific Job board.&quot;</span>
    <span class="nx">employee</span> <span class="o">=</span> <span class="nx">models</span><span class="p">.</span><span class="nx">ForeignKey</span><span class="p">(</span><span class="nx">Employee</span><span class="p">)</span>
    <span class="nx">name</span> <span class="o">=</span> <span class="nx">models</span><span class="p">.</span><span class="nx">CharField</span><span class="p">(</span><span class="nx">max_length</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)</span>
    <span class="nx">type</span> <span class="o">=</span> <span class="nx">models</span><span class="p">.</span><span class="nx">CharField</span><span class="p">(</span><span class="nx">max_length</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)</span>
    <span class="nx">order</span> <span class="o">=</span> <span class="nx">models</span><span class="p">.</span><span class="nx">IntegerField</span><span class="p">()</span>

<span class="err">#</span><span class="k">in</span> <span class="nx">forms</span><span class="p">.</span><span class="nx">py</span>

<span class="nx">def</span> <span class="nx">get_employee_form</span><span class="p">(</span><span class="nx">employee</span><span class="p">)</span><span class="o">:</span>
    <span class="s2">&quot;&quot;&quot;Return the form for a specific Board.&quot;&quot;&quot;</span>
    <span class="nx">employee_fields</span> <span class="o">=</span> <span class="nx">EmployeeFieldModel</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">employee</span> <span class="o">=</span> <span class="nx">employee</span><span class="p">).</span><span class="nx">order_by</span><span class="p">(</span><span class="s1">&#39;order&#39;</span><span class="p">)</span>
    <span class="kr">class</span> <span class="nx">EmployeeForm</span><span class="p">(</span><span class="nx">forms</span><span class="p">.</span><span class="nx">Form</span><span class="p">)</span><span class="o">:</span>
    <span class="nx">def</span> <span class="nx">__init__</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="o">*</span><span class="nx">args</span><span class="p">,</span> <span class="o">**</span><span class="nx">kwargs</span><span class="p">)</span><span class="o">:</span>
        <span class="nx">forms</span><span class="p">.</span><span class="nx">Form</span><span class="p">.</span><span class="nx">__init__</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="o">*</span><span class="nx">args</span><span class="p">,</span> <span class="o">**</span><span class="nx">kwargs</span><span class="p">)</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">employee</span> <span class="o">=</span> <span class="nx">employee</span>
    <span class="nx">def</span> <span class="nx">save</span><span class="p">(</span><span class="nx">self</span><span class="p">)</span><span class="o">:</span>
        <span class="s2">&quot;Do the save&quot;</span>
    <span class="k">for</span> <span class="nx">field</span> <span class="k">in</span> <span class="nx">employee_fields</span>:
    <span class="kt">setattr</span><span class="p">(</span><span class="nx">EmployeeForm</span><span class="p">,</span> <span class="nx">field</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">copy</span><span class="p">(</span><span class="nx">type_mapping</span><span class="p">[</span><span class="nx">field</span><span class="p">.</span><span class="nx">type</span><span class="p">]))</span>
    <span class="k">return</span> <span class="nx">type</span><span class="p">(</span><span class="s1">&#39;EmployeeForm&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">forms</span><span class="p">.</span><span class="nx">Form</span><span class="p">,</span> <span class="p">),</span> <span class="nx">dict</span><span class="p">(</span><span class="nx">EmployeeForm</span><span class="p">.</span><span class="nx">__dict__</span><span class="p">))</span>

<span class="err">#</span><span class="k">in</span> <span class="nx">views</span><span class="p">.</span><span class="nx">py</span>

<span class="nx">employee</span> <span class="o">=</span> <span class="nx">Employee</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">employee_slug</span><span class="p">)</span>
<span class="nx">get_employee_form</span><span class="p">(</span><span class="nx">employee</span><span class="p">)</span>
</pre></div>


<p>PS. A similar techniques works for Dynamic models.<br>
PPS. Yes I have worked with Oracle. Yes, all my data models start with Employee and Departments.</p>
<hr>
<p>Want to build an <a href="http://uswaretech.com/">Web Application</a>. Talk to <a href="http://uswaretech.com/contact/">Usware</a></p>
            
            
            <hr/>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2008-10-10T09:16:05+05:30">Oct 10, 2008</time>

<h4>Last Updated</h4>
<time datetime="2008-10-10T19:46:05+05:30">Oct 10, 2008</time>

            <h4>Category</h4>
            <a class="category-link" href="/categories.html#markdown-ref">markdown</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="/tags.html#forms-ref">forms
                    <span>2</span>
</a></li>
            </ul>
<h4>Contact</h4>
    <a href="#" title="My You can add links in your config file Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-you can add links in your config file sidebar-social-links"></i></a>
    <a href="#" title="My Another social link Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-another social link sidebar-social-links"></i></a>
        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a></li>
    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    
    </body>
    <!-- Theme: Elegant built for Pelican
    License : http://oncrashreboot.com/pelican-elegant -->
</html>