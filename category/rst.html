<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>agiliq_blog - rst</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">agiliq_blog </a></h1>
                <nav><ul>
                    <li><a href="/category/html.html">html</a></li>
                    <li><a href="/category/markdown.html">markdown</a></li>
                    <li class="active"><a href="/category/rst.html">rst</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/django-20-window-expressions-tutorial.html">Django 2.0 Window expressions tutorial</a></h1>
<footer class="post-info">
        <abbr class="published" title="2017-12-06T05:22:38+05:30">
                Published: Wed 06 December 2017
        </abbr>
		<br />
        <abbr class="modified" title="2017-12-06T16:52:38+05:30">
                Updated: Wed 06 December 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/shabda.html">shabda</a>
        </address>
<p>In <a href="/category/rst.html">rst</a>.</p>
<p>tags: <a href="/tag/django.html">django</a> </p>
</footer><!-- /.post-info --><p>Django 2.0 was <a class="reference external" href="https://docs.djangoproject.com/en/2.0/releases/">released recently</a> and among the most exciting things for me is support for Window expressions, which allows adding an OVER clause to querysets. We will use Window expressions to analyze the commits data to the Django repo.</p>
<div class="section" id="so-what-is-an-over-clause">
<h2>So what is an over clause?</h2>
<p>An over clause is of this format</p>
<pre class="code sql literal-block">
<span class="k">SELECT</span> <span class="n">depname</span><span class="p">,</span> <span class="n">empno</span><span class="p">,</span> <span class="n">salary</span><span class="p">,</span>
  <span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span>
    <span class="n">OVER</span> <span class="p">(</span><span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">depname</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">empsalary</span><span class="p">;</span>
</pre>
<p>Compare this to a similar <cite>GROUP BY</cite> statement</p>
<pre class="code sql literal-block">
<span class="k">SELECT</span> <span class="n">depname</span><span class="p">,</span> <span class="k">avg</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">empsalary</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">depname</span><span class="p">;</span>
</pre>
<p>The difference is a <cite>GROUP BY</cite> has as many rows as grouping elements, here number of <cite>depname</cite>. An over clause adds the the aggregated result to each row of the select.</p>
<p><a class="reference external" href="https://www.postgresql.org/docs/9.1/static/tutorial-window.html">Postgres documentation says</a>, &quot;A window function performs a calculation across a set of table rows that are somehow related to the current row. This is comparable to the type of calculation that can be done with an aggregate function. But unlike regular aggregate functions, use of a window function does not cause rows to become grouped into a single output row — the rows retain their separate identities. Behind the scenes, the window function is able to access more than just the current row of the query result.&quot; This is true for all other DB implementation as well.</p>
</div>
<div class="section" id="what-are-real-world-uses-of-over-expressions">
<h2>What are real world uses of over expressions?</h2>
<p>We will use the Django ORM with the <cite>Window</cite> expression to to some analysis on the most prolific committers to Django. To do this we will export the commiter names and time of commit to a csv.</p>
<pre class="code bash literal-block">
git log  --no-merges --date<span class="o">=</span>iso --pretty<span class="o">=</span>format:<span class="s1">'%h|%an|%aI'</span> &gt; commits.iso.csv
</pre>
<p>This is not ranking of Django developers, just of their number of commits, which allows us an interestig dataset. I am grateful to everyone who has contributed to Django - they have made my life immesureably better.</p>
<p>With some light data wrangling using Pandas, we transform this to a per author, per year data and import to Postgres. Our table structure looks like this.</p>
<pre class="code sql literal-block">
<span class="n">experiments</span><span class="o">=#</span> <span class="err">\</span><span class="n">d</span> <span class="n">commits_by_year</span><span class="p">;</span>
   <span class="k">Table</span> <span class="ss">&quot;public.commits_by_year&quot;</span>
    <span class="k">Column</span>     <span class="o">|</span>  <span class="k">Type</span>   <span class="o">|</span> <span class="n">Modifiers</span>
<span class="c1">---------------+---------+-----------
</span> <span class="n">id</span>            <span class="o">|</span> <span class="nb">bigint</span>  <span class="o">|</span>
 <span class="n">author</span>        <span class="o">|</span> <span class="nb">text</span>    <span class="o">|</span>
 <span class="n">commit_year</span>   <span class="o">|</span> <span class="nb">integer</span> <span class="o">|</span>
 <span class="n">commits_count</span> <span class="o">|</span> <span class="nb">integer</span> <span class="o">|</span>
</pre>
<p>We define a model to interact with this table.</p>
<pre class="code python3 literal-block">
<span class="kn">from</span> <span class="nn">django.db</span> <span class="k">import</span> <span class="n">models</span>


<span class="k">class</span> <span class="nc">Committer</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">commit_year</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">()</span>
    <span class="n">commits_count</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveIntegerField</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">db_table</span> <span class="o">=</span> <span class="s1">'commits_by_year'</span>
</pre>
<p>Lets quickly test if our data is imported. <a class="reference external" href="https://github.com/shabda/experiments/blob/master/data/commits_by_year.csv">You can get a csv from here</a>, and import to Postgres to follow along.</p>
<pre class="code python3 literal-block">
<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">Committer</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="mi">2318</span>
</pre>
<p>Let us setup our environment and get the imports we need.</p>
<pre class="code python3 literal-block">
<span class="c1">## Some ORM imports which we are going to need</span>

<span class="kn">from</span> <span class="nn">django.db.models</span> <span class="k">import</span> <span class="n">Avg</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="n">Window</span>
<span class="kn">from</span> <span class="nn">django.db.models.functions</span> <span class="k">import</span>  <span class="n">Rank</span><span class="p">,</span> <span class="n">DenseRank</span><span class="p">,</span> <span class="n">CumeDist</span>
<span class="kn">from</span> <span class="nn">django_commits.models</span> <span class="k">import</span> <span class="n">Committer</span>

<span class="c1"># We will use pandas to display the queryset in tanular format</span>
<span class="kn">import</span> <span class="nn">pandas</span>
<span class="n">pandas</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">max_rows</span><span class="o">=</span><span class="mi">20</span>

<span class="c1"># An utility function to display querysets</span>
<span class="k">def</span> <span class="nf">as_table</span><span class="p">(</span><span class="n">values_queryset</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">values_queryset</span><span class="p">))</span>
</pre>
<p>Lets quickly look at the data we have.</p>
<pre class="code python3 literal-block">
<span class="n">as_table</span><span class="p">(</span><span class="n">Committer</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
  <span class="s2">&quot;author&quot;</span><span class="p">,</span> <span class="s2">&quot;commit_year&quot;</span><span class="p">,</span> <span class="s2">&quot;commits_count&quot;</span>
<span class="p">))</span>
</pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>author</th>
      <th>commit_year</th>
      <th>commits_count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Tim Graham</td>
      <td>2017</td>
      <td>373</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Sergey Fedoseev</td>
      <td>2017</td>
      <td>158</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Mariusz Felisiak</td>
      <td>2017</td>
      <td>113</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Claude Paroz</td>
      <td>2017</td>
      <td>102</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Mads Jensen</td>
      <td>2017</td>
      <td>55</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Simon Charette</td>
      <td>2017</td>
      <td>40</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Jon Dufresne</td>
      <td>2017</td>
      <td>33</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Anton Samarchyan</td>
      <td>2017</td>
      <td>27</td>
    </tr>
    <tr>
      <th>8</th>
      <td>François Freitag</td>
      <td>2017</td>
      <td>17</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Srinivas Reddy Thatiparthy</td>
      <td>2017</td>
      <td>14</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2308</th>
      <td>Malcolm Tredinnick</td>
      <td>2006</td>
      <td>175</td>
    </tr>
    <tr>
      <th>2309</th>
      <td>Georg Bauer</td>
      <td>2006</td>
      <td>90</td>
    </tr>
    <tr>
      <th>2310</th>
      <td>Russell Keith-Magee</td>
      <td>2006</td>
      <td>86</td>
    </tr>
    <tr>
      <th>2311</th>
      <td>Jacob Kaplan-Moss</td>
      <td>2006</td>
      <td>83</td>
    </tr>
    <tr>
      <th>2312</th>
      <td>Luke Plant</td>
      <td>2006</td>
      <td>20</td>
    </tr>
    <tr>
      <th>2313</th>
      <td>Wilson Miner</td>
      <td>2006</td>
      <td>12</td>
    </tr>
    <tr>
      <th>2314</th>
      <td>Adrian Holovaty</td>
      <td>2005</td>
      <td>1015</td>
    </tr>
    <tr>
      <th>2315</th>
      <td>Jacob Kaplan-Moss</td>
      <td>2005</td>
      <td>130</td>
    </tr>
    <tr>
      <th>2316</th>
      <td>Georg Bauer</td>
      <td>2005</td>
      <td>112</td>
    </tr>
    <tr>
      <th>2317</th>
      <td>Wilson Miner</td>
      <td>2005</td>
      <td>20</td>
    </tr>
  </tbody>
</table>
<p>2318 rows × 3 columns</p>
</div><p>We will now use the Window expression to get the contributors ranked
by number of commits, within each year. We will go over the code in detail, but lets look at the queryset and results.</p>
<pre class="code python3 literal-block">
<span class="c1"># Find out who have been the most prolific contributors</span>
<span class="c1"># in the years 2010-2017</span>

<span class="n">dense_rank_by_year</span> <span class="o">=</span> <span class="n">Window</span><span class="p">(</span>
    <span class="n">expression</span><span class="o">=</span><span class="n">DenseRank</span><span class="p">(),</span>
    <span class="n">partition_by</span><span class="o">=</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;commit_year&quot;</span><span class="p">),</span>
    <span class="n">order_by</span><span class="o">=</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;commits_count&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">desc</span><span class="p">()</span>
<span class="p">)</span>

<span class="n">commiters_with_rank</span> <span class="o">=</span> <span class="n">Committer</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
        <span class="n">commit_year__gte</span><span class="o">=</span><span class="mi">2010</span><span class="p">,</span> <span class="n">commits_count__gte</span><span class="o">=</span><span class="mi">10</span>
    <span class="p">)</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
        <span class="n">the_rank</span><span class="o">=</span><span class="n">dense_rank_by_year</span>
    <span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span>
        <span class="s2">&quot;-commit_year&quot;</span><span class="p">,</span> <span class="s2">&quot;the_rank&quot;</span>
    <span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
        <span class="s2">&quot;author&quot;</span><span class="p">,</span> <span class="s2">&quot;commit_year&quot;</span><span class="p">,</span> <span class="s2">&quot;commits_count&quot;</span><span class="p">,</span> <span class="s2">&quot;the_rank&quot;</span>
    <span class="p">)</span>
<span class="n">as_table</span><span class="p">(</span><span class="n">commiters_with_rank</span><span class="p">)</span>
</pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>author</th>
      <th>commit_year</th>
      <th>commits_count</th>
      <th>the_rank</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Tim Graham</td>
      <td>2017</td>
      <td>373</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Sergey Fedoseev</td>
      <td>2017</td>
      <td>158</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Mariusz Felisiak</td>
      <td>2017</td>
      <td>113</td>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Claude Paroz</td>
      <td>2017</td>
      <td>102</td>
      <td>4</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Mads Jensen</td>
      <td>2017</td>
      <td>55</td>
      <td>5</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Simon Charette</td>
      <td>2017</td>
      <td>40</td>
      <td>6</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Jon Dufresne</td>
      <td>2017</td>
      <td>33</td>
      <td>7</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Anton Samarchyan</td>
      <td>2017</td>
      <td>27</td>
      <td>8</td>
    </tr>
    <tr>
      <th>8</th>
      <td>François Freitag</td>
      <td>2017</td>
      <td>17</td>
      <td>9</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Srinivas Reddy Thatiparthy</td>
      <td>2017</td>
      <td>14</td>
      <td>10</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>171</th>
      <td>Joseph Kocherhans</td>
      <td>2010</td>
      <td>53</td>
      <td>11</td>
    </tr>
    <tr>
      <th>172</th>
      <td>Ramiro Morales</td>
      <td>2010</td>
      <td>53</td>
      <td>11</td>
    </tr>
    <tr>
      <th>173</th>
      <td>Jacob Kaplan-Moss</td>
      <td>2010</td>
      <td>42</td>
      <td>12</td>
    </tr>
    <tr>
      <th>174</th>
      <td>Chris Beaven</td>
      <td>2010</td>
      <td>29</td>
      <td>13</td>
    </tr>
    <tr>
      <th>175</th>
      <td>Malcolm Tredinnick</td>
      <td>2010</td>
      <td>26</td>
      <td>14</td>
    </tr>
    <tr>
      <th>176</th>
      <td>Honza Král</td>
      <td>2010</td>
      <td>20</td>
      <td>15</td>
    </tr>
    <tr>
      <th>177</th>
      <td>Carl Meyer</td>
      <td>2010</td>
      <td>17</td>
      <td>16</td>
    </tr>
    <tr>
      <th>178</th>
      <td>Ian Kelly</td>
      <td>2010</td>
      <td>17</td>
      <td>16</td>
    </tr>
    <tr>
      <th>179</th>
      <td>Simon Meers</td>
      <td>2010</td>
      <td>11</td>
      <td>17</td>
    </tr>
    <tr>
      <th>180</th>
      <td>Gary Wilson Jr</td>
      <td>2010</td>
      <td>10</td>
      <td>18</td>
    </tr>
  </tbody>
</table>
<p>181 rows × 4 columns</p>
</div><p>Lets look a the the ORM code in more detail here.</p>
<pre class="code python3 literal-block">
<span class="c1"># We are creating the Window function part of our SQL query here</span>
<span class="n">dense_rank_by_year</span> <span class="o">=</span> <span class="n">Window</span><span class="p">(</span>
    <span class="c1"># We want to get the Rank with no gaps</span>
    <span class="n">expression</span><span class="o">=</span><span class="n">DenseRank</span><span class="p">(),</span>
    <span class="c1"># We want to partition the queryset on commit_year</span>
    <span class="c1"># Each distinct commit_year is a different partition</span>
    <span class="n">partition_by</span><span class="o">=</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;commit_year&quot;</span><span class="p">),</span>
    <span class="c1"># This decides the ordering within each partition</span>
    <span class="n">order_by</span><span class="o">=</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;commits_count&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">desc</span><span class="p">()</span>
<span class="p">)</span>


<span class="n">commiters_with_rank</span> <span class="o">=</span> <span class="n">Committer</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
        <span class="n">commit_year__gte</span><span class="o">=</span><span class="mi">2010</span><span class="p">,</span> <span class="n">commits_count__gte</span><span class="o">=</span><span class="mi">10</span>
    <span class="c1"># Standard filter oprtation, limit rows to 2010-2017</span>
    <span class="p">)</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="c1"># For each commiter, we are annotating its rank</span>
        <span class="n">the_rank</span><span class="o">=</span><span class="n">dense_rank_by_year</span>
    <span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span>
        <span class="s2">&quot;-commit_year&quot;</span><span class="p">,</span> <span class="s2">&quot;the_rank&quot;</span>
    <span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
        <span class="s2">&quot;author&quot;</span><span class="p">,</span> <span class="s2">&quot;commit_year&quot;</span><span class="p">,</span> <span class="s2">&quot;commits_count&quot;</span><span class="p">,</span> <span class="s2">&quot;the_rank&quot;</span>
    <span class="p">)</span>
<span class="n">as_table</span><span class="p">(</span><span class="n">commiters_with_rank</span><span class="p">)</span>
</pre>
<p>Now lets try getting the average commits per commiter for each year along with the other data.</p>
<pre class="code python3 literal-block">
<span class="n">avg_commits_per_year</span> <span class="o">=</span> <span class="n">Window</span><span class="p">(</span>
    <span class="c1"># We want the average of commits per committer, with each partition</span>
    <span class="n">expression</span><span class="o">=</span><span class="n">Avg</span><span class="p">(</span><span class="s2">&quot;commits_count&quot;</span><span class="p">),</span>
    <span class="c1"># Each individual year is a partition.</span>
    <span class="n">partition_by</span><span class="o">=</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;commit_year&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">commiters_with_yearly_average</span> <span class="o">=</span> <span class="n">Committer</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">()</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
      <span class="n">avg_commit_per_year</span><span class="o">=</span><span class="n">avg_commits_per_year</span>
    <span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
        <span class="s2">&quot;author&quot;</span><span class="p">,</span> <span class="s2">&quot;commit_year&quot;</span><span class="p">,</span> <span class="s2">&quot;commits_count&quot;</span><span class="p">,</span> <span class="s2">&quot;avg_commit_per_year&quot;</span>
    <span class="p">)</span>
<span class="c1"># We could have done further operation with avg_commit_per_year</span>
<span class="c1"># Eg: F(commits_count) - F(avg_commit_per_year),</span>
<span class="c1"># would tell us committers who commit more than average</span>
<span class="n">as_table</span><span class="p">(</span><span class="n">commiters_with_yearly_average</span><span class="p">)</span>
</pre>
<p>This gives us</p>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>author</th>
      <th>avg_commit_per_year</th>
      <th>commit_year</th>
      <th>commits_count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Wilson Miner</td>
      <td>319.250000</td>
      <td>2005</td>
      <td>20</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Adrian Holovaty</td>
      <td>319.250000</td>
      <td>2005</td>
      <td>1015</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Jacob Kaplan-Moss</td>
      <td>319.250000</td>
      <td>2005</td>
      <td>130</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Georg Bauer</td>
      <td>319.250000</td>
      <td>2005</td>
      <td>112</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Russell Keith-Magee</td>
      <td>188.571429</td>
      <td>2006</td>
      <td>86</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Jacob Kaplan-Moss</td>
      <td>188.571429</td>
      <td>2006</td>
      <td>83</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Luke Plant</td>
      <td>188.571429</td>
      <td>2006</td>
      <td>20</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Wilson Miner</td>
      <td>188.571429</td>
      <td>2006</td>
      <td>12</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Adrian Holovaty</td>
      <td>188.571429</td>
      <td>2006</td>
      <td>854</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Malcolm Tredinnick</td>
      <td>188.571429</td>
      <td>2006</td>
      <td>175</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2308</th>
      <td>Adam Johnson</td>
      <td>4.916084</td>
      <td>2017</td>
      <td>13</td>
    </tr>
    <tr>
      <th>2309</th>
      <td>Tom</td>
      <td>4.916084</td>
      <td>2017</td>
      <td>13</td>
    </tr>
    <tr>
      <th>2310</th>
      <td>Srinivas Reddy Thatiparthy</td>
      <td>4.916084</td>
      <td>2017</td>
      <td>14</td>
    </tr>
    <tr>
      <th>2311</th>
      <td>François Freitag</td>
      <td>4.916084</td>
      <td>2017</td>
      <td>17</td>
    </tr>
    <tr>
      <th>2312</th>
      <td>Anton Samarchyan</td>
      <td>4.916084</td>
      <td>2017</td>
      <td>27</td>
    </tr>
    <tr>
      <th>2313</th>
      <td>Jon Dufresne</td>
      <td>4.916084</td>
      <td>2017</td>
      <td>33</td>
    </tr>
    <tr>
      <th>2314</th>
      <td>Simon Charette</td>
      <td>4.916084</td>
      <td>2017</td>
      <td>40</td>
    </tr>
    <tr>
      <th>2315</th>
      <td>Mads Jensen</td>
      <td>4.916084</td>
      <td>2017</td>
      <td>55</td>
    </tr>
    <tr>
      <th>2316</th>
      <td>Claude Paroz</td>
      <td>4.916084</td>
      <td>2017</td>
      <td>102</td>
    </tr>
    <tr>
      <th>2317</th>
      <td>Mariusz Felisiak</td>
      <td>4.916084</td>
      <td>2017</td>
      <td>113</td>
    </tr>
  </tbody>
</table>
<p>2318 rows × 4 columns</p>
</div><p>You could try other Window functions such as <cite>CumeDist</cite>, <cite>Rank</cite> or <cite>Ntile</cite>.</p>
<pre class="code python3 literal-block">
<span class="kn">from</span> <span class="nn">django.db.models.functions</span> <span class="k">import</span> <span class="n">CumeDist</span>
<span class="n">cumedist_by_year</span> <span class="o">=</span> <span class="n">Window</span><span class="p">(</span>
    <span class="n">expression</span><span class="o">=</span><span class="n">CumeDist</span><span class="p">(),</span>
    <span class="n">partition_by</span><span class="o">=</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;commit_year&quot;</span><span class="p">),</span>
    <span class="n">order_by</span><span class="o">=</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;commits_count&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">desc</span><span class="p">()</span>
<span class="p">)</span>

<span class="n">commiters_with_rank</span> <span class="o">=</span> <span class="n">Committer</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
        <span class="n">commit_year__gte</span><span class="o">=</span><span class="mi">2010</span><span class="p">,</span> <span class="n">commits_count__gte</span><span class="o">=</span><span class="mi">10</span>
    <span class="p">)</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
        <span class="n">cumedist_by_year</span><span class="o">=</span><span class="n">cumedist_by_year</span>
    <span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span>
        <span class="s2">&quot;-commit_year&quot;</span><span class="p">,</span> <span class="s2">&quot;the_rank&quot;</span>
    <span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
        <span class="s2">&quot;author&quot;</span><span class="p">,</span> <span class="s2">&quot;commit_year&quot;</span><span class="p">,</span> <span class="s2">&quot;commits_count&quot;</span><span class="p">,</span> <span class="s2">&quot;cumedist_by_year&quot;</span>
    <span class="p">)</span>
<span class="n">as_table</span><span class="p">(</span><span class="n">commiters_with_rank</span><span class="p">)</span>
</pre>
<p>Until now, we have partitioned on <cite>commit_year</cite>. We can partition on other fields too. We will partition on <cite>author</cite> to find out how their contributions have changed over the years using the <cite>Lag</cite> window expression.</p>
<pre class="code python3 literal-block">
<span class="kn">from</span> <span class="nn">django.db.models.functions</span> <span class="k">import</span> <span class="n">Lag</span>
<span class="kn">from</span> <span class="nn">django.db.models</span> <span class="k">import</span> <span class="n">Value</span>
<span class="n">commits_in_previous_year</span> <span class="o">=</span> <span class="n">Window</span><span class="p">(</span>
    <span class="n">expression</span><span class="o">=</span><span class="n">Lag</span><span class="p">(</span><span class="s2">&quot;commits_count&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">Value</span><span class="p">(</span><span class="mi">0</span><span class="p">)),</span>
    <span class="n">partition_by</span><span class="o">=</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;author&quot;</span><span class="p">),</span>
    <span class="n">order_by</span><span class="o">=</span><span class="n">F</span><span class="p">(</span><span class="s2">&quot;commit_year&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">asc</span><span class="p">(),</span>
<span class="p">)</span>

<span class="n">commiters_with_pervious_year_commit</span> <span class="o">=</span> <span class="n">Committer</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
        <span class="n">commit_year__gte</span><span class="o">=</span><span class="mi">2010</span><span class="p">,</span> <span class="n">commits_count__gte</span><span class="o">=</span><span class="mi">10</span>
    <span class="p">)</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span>
        <span class="n">commits_in_previous_year</span><span class="o">=</span><span class="n">commits_in_previous_year</span>
    <span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span>
        <span class="s2">&quot;author&quot;</span><span class="p">,</span> <span class="s2">&quot;-commit_year&quot;</span>
    <span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
        <span class="s2">&quot;author&quot;</span><span class="p">,</span> <span class="s2">&quot;commit_year&quot;</span><span class="p">,</span> <span class="s2">&quot;commits_count&quot;</span><span class="p">,</span> <span class="s2">&quot;commits_in_previous_year&quot;</span>
    <span class="p">)</span>
<span class="n">as_table</span><span class="p">(</span><span class="n">commiters_with_pervious_year_commit</span><span class="p">)</span>
</pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>author</th>
      <th>commit_year</th>
      <th>commits_count</th>
      <th>commits_in_previous_year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Adam Chainz</td>
      <td>2016</td>
      <td>42</td>
      <td>12</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Adam Chainz</td>
      <td>2015</td>
      <td>12</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Adam Johnson</td>
      <td>2017</td>
      <td>13</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Adrian Holovaty</td>
      <td>2012</td>
      <td>40</td>
      <td>98</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Adrian Holovaty</td>
      <td>2011</td>
      <td>98</td>
      <td>72</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Adrian Holovaty</td>
      <td>2010</td>
      <td>72</td>
      <td>0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Akshesh</td>
      <td>2016</td>
      <td>31</td>
      <td>0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Alasdair Nicol</td>
      <td>2016</td>
      <td>13</td>
      <td>19</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Alasdair Nicol</td>
      <td>2015</td>
      <td>19</td>
      <td>17</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Alasdair Nicol</td>
      <td>2013</td>
      <td>17</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>171</th>
      <td>Timo Graham</td>
      <td>2012</td>
      <td>13</td>
      <td>70</td>
    </tr>
    <tr>
      <th>172</th>
      <td>Timo Graham</td>
      <td>2011</td>
      <td>70</td>
      <td>60</td>
    </tr>
    <tr>
      <th>173</th>
      <td>Timo Graham</td>
      <td>2010</td>
      <td>60</td>
      <td>0</td>
    </tr>
    <tr>
      <th>174</th>
      <td>Tom</td>
      <td>2017</td>
      <td>13</td>
      <td>0</td>
    </tr>
    <tr>
      <th>175</th>
      <td>Unai Zalakain</td>
      <td>2013</td>
      <td>17</td>
      <td>0</td>
    </tr>
    <tr>
      <th>176</th>
      <td>Vajrasky Kok</td>
      <td>2013</td>
      <td>14</td>
      <td>0</td>
    </tr>
    <tr>
      <th>177</th>
      <td>areski</td>
      <td>2014</td>
      <td>15</td>
      <td>0</td>
    </tr>
    <tr>
      <th>178</th>
      <td>eltronix</td>
      <td>2016</td>
      <td>10</td>
      <td>0</td>
    </tr>
    <tr>
      <th>179</th>
      <td>wrwrwr</td>
      <td>2014</td>
      <td>21</td>
      <td>0</td>
    </tr>
    <tr>
      <th>180</th>
      <td>Łukasz Langa</td>
      <td>2013</td>
      <td>15</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>181 rows × 4 columns</p>
</div><p>I hope this tutorial has been helpful in understanding the window expressions. While still not as felxible as SqlAlchemy, Django ORM has become extremely powerful with recent Django releases. Stay tuned for more advanced ORM tutorials.</p>
</div>
                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/introduction-to-python-workshop-on-february-15th-2.html" rel="bookmark"
                           title="Permalink to Introduction to Python Workshop on February 15th, 2013">Introduction to Python Workshop on February 15th, 2013</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2013-02-08T00:00:00+05:30">
                Published: Fri 08 February 2013
        </abbr>
		<br />
        <abbr class="modified" title="2013-02-08T11:30:00+05:30">
                Updated: Fri 08 February 2013
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/thejaswi.html">thejaswi</a>
        </address>
<p>In <a href="/category/rst.html">rst</a>.</p>
<p>tags: <a href="/tag/training.html">training</a> </p>
</footer><!-- /.post-info -->                <p class="first last">We are conducting an &quot;Introduction to Python&quot; workshop at <a class="reference internal" href="#our-office">our office</a> on February 15th, 2013 between 5-8PM IST. This workshop is geared towards those who are planning to learn python. Topics: * Language features * Variables * Built in data structures * Functions * Object Oriented Programming * Demo writing a simple program Prerequisites to attend this session: * Basic programming skills. * A laptop with any linux flavour (OR) a laptop with Python installed in it. Register for the workshop by filling up the form. .. <span class="target" id="our-office">our office</span>: <a class="reference external" href="http://agiliq.com/contactus#map">http://agiliq.com/contactus#map</a> .. _Register: <a class="reference external" href="http://bit.ly/Yf0eiH">http://bit.ly/Yf0eiH</a></p>

                <a class="readmore" href="/introduction-to-python-workshop-on-february-15th-2.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/the-missing-documentation-for-djangoutilsdatastruc.html" rel="bookmark"
                           title="Permalink to The missing documentation for django.utils.datastructures">The missing documentation for django.utils.datastructures</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-11-01T00:00:00+05:30">
                Published: Thu 01 November 2012
        </abbr>
		<br />
        <abbr class="modified" title="2012-11-01T10:30:00+05:30">
                Updated: Thu 01 November 2012
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/thejaswi.html">thejaswi</a>
        </address>
<p>In <a href="/category/rst.html">rst</a>.</p>
<p>tags: <a href="/tag/internals.html">internals</a> </p>
</footer><!-- /.post-info -->                <div class="admonition note first last">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal">django.utils.datastructures</tt> is intentionally not documented by the django core devs because it is an internal API and is liable to change without any notice. This file is not governed by django's lenient backwards-compatible policy. You have been sufficiently warned! With the note out of the way, let's look at the interesting <a class="reference external" href="https://en.wikipedia.org/wiki/Data_structure">datastructures</a> in this file. You may ask why we should learn about those when we shouldn't be using them? Reading code is the best way of learning and this file has some beautiful code. <tt class="docutils literal">MergeDict</tt> is the first of the datastructures in the file. It provides a</p>
</div>

                <a class="readmore" href="/the-missing-documentation-for-djangoutilsdatastruc.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/dissecting-phonegaps-architecture.html" rel="bookmark"
                           title="Permalink to Dissecting Phonegap's architecture">Dissecting Phonegap's architecture</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-09-06T00:00:00+05:30">
                Published: Thu 06 September 2012
        </abbr>
		<br />
        <abbr class="modified" title="2012-09-06T10:30:00+05:30">
                Updated: Thu 06 September 2012
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/thejaswi.html">thejaswi</a>
        </address>
<p>In <a href="/category/rst.html">rst</a>.</p>
<p>tags: <a href="/tag/ios.html">ios</a> </p>
</footer><!-- /.post-info -->                <p class="first last"><a class="reference external" href="http://incubator.apache.org/cordova/">Apache Cordova</a> is a open source cross-platform framework for building native mobile applications using HTML, CSS and JavaScript. It started off as Phonegap, a project of Nitobi Software before it was acquired by Adobe Systems. The code for the platform was donated to the Apache Software foundation and is currently being incubated as &quot;Apache Cordova&quot;. <a class="reference external" href="http://phonegap.com/">Phonegap</a> is now a distribution of Apache Cordova (analogous to Ubuntu being a Linux distribution) brought to you by Adobe. Since Apache Cordova is licensed under the permissive Apache Software License, Adobe Phonegap may technically be integrated with proprietary software (though there's no evidence for</p>

                <a class="readmore" href="/dissecting-phonegaps-architecture.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/dropbox-file-upload-handler-for-django.html" rel="bookmark"
                           title="Permalink to Dropbox file upload handler for django">Dropbox file upload handler for django</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-07-17T00:00:00+05:30">
                Published: Tue 17 July 2012
        </abbr>
		<br />
        <abbr class="modified" title="2012-07-17T10:30:00+05:30">
                Updated: Tue 17 July 2012
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/thejaswi.html">thejaswi</a>
        </address>
<p>In <a href="/category/rst.html">rst</a>.</p>
<p>tags: <a href="/tag/upload.html">upload</a> </p>
</footer><!-- /.post-info -->                <p class="first last">Dropbox <a class="reference external" href="http://blog.dropbox.com/index.php/new-dropbox-pro-plans/">announced</a> new pro plans last week and some accounts have ahd their storage size doubled. Wouldn't it be wonderful if we could upload all our files to dropbox from our django webapp? In this post, I write a custom file upload handler that will upload files from our application to dropbox. Let us see how to use the custom file upload handler. Install the <a class="reference external" href="https://www.dropbox.com/developers/reference/sdk">Dropbox Python SDK</a> before you setup your django app to handle the file uploads. In your <cite>settings.py</cite>, add the following attributes (with the values filled):: DROPBOX_APP_KEY = &quot;&quot; DROPBOX_APP_SECRET_KEY = &quot;&quot; DROPBOX_APP_ACCESS_TOKEN = &quot;&quot; DROPBOX_APP_ACCESS_TOKEN_SECRET</p>

                <a class="readmore" href="/dropbox-file-upload-handler-for-django.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/using-ubuntu-cloud-images-in-kvm.html" rel="bookmark"
                           title="Permalink to Using Ubuntu cloud images in KVM">Using Ubuntu cloud images in KVM</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-07-16T00:00:00+05:30">
                Published: Mon 16 July 2012
        </abbr>
		<br />
        <abbr class="modified" title="2012-07-16T10:30:00+05:30">
                Updated: Mon 16 July 2012
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/thejaswi.html">thejaswi</a>
        </address>
<p>In <a href="/category/rst.html">rst</a>.</p>
<p>tags: <a href="/tag/virtualization.html">virtualization</a> </p>
</footer><!-- /.post-info -->                <p class="first last">Quite a few of our clients are powered by Amazon EC2 or Rackspace and we use Ubuntu LTS releases for our servers. Canonical <a class="reference external" href="http://cloud-images.ubuntu.com/">provides</a> EC2 AMIs and Openstack images for all their releases. By using these <a class="reference external" href="https://en.wikipedia.org/wiki/Just_enough_operating_system">JeOS images</a> on the server as well as on the development platform reduces the dev/prod parity which we discussed in a <a class="reference external" href="http://agiliq.com/blog/2012/06/libvirt-and-kvm/">previous</a> post. In this post, we'll see how to setup the Ubuntu cloud images in the local KVM hypervisor. Unlike the previous post, we'll use only the virt-manager to do the initial provisioning but you can be assured that there is a command</p>

                <a class="readmore" href="/using-ubuntu-cloud-images-in-kvm.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/libvirt-and-kvm.html" rel="bookmark"
                           title="Permalink to Libvirt and KVM">Libvirt and KVM</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-06-25T00:00:00+05:30">
                Published: Mon 25 June 2012
        </abbr>
		<br />
        <abbr class="modified" title="2012-06-25T10:30:00+05:30">
                Updated: Mon 25 June 2012
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/thejaswi.html">thejaswi</a>
        </address>
<p>In <a href="/category/rst.html">rst</a>.</p>
<p>tags: <a href="/tag/virtualization.html">virtualization</a> </p>
</footer><!-- /.post-info -->                <p class="first last">================ Libvirt and KVM ================ <em>&quot;But it works on my local setup!&quot;</em> We have heard or probably said this tens of times after something that we deployed to the production server breaks. After fire fighting for hours we learn that a particular package's version varies from the local setup. This is a fairly common problem that plagues every developer. Off late, quite a lot of interest and work is going into reducing the <a class="reference external" href="http://www.12factor.net/dev-prod-parity">dev/prod parity</a> to prevent such problems. Software like virtualenv help a great deal in compartmentalizing python dependencies but most web applications nowadays have to deal with loads</p>

                <a class="readmore" href="/libvirt-and-kvm.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/developing-android-applications-from-command-line.html" rel="bookmark"
                           title="Permalink to Developing android applications from command line">Developing android applications from command line</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-03-20T01:00:00+05:30">
                Published: Tue 20 March 2012
        </abbr>
		<br />
        <abbr class="modified" title="2012-03-20T11:30:00+05:30">
                Updated: Tue 20 March 2012
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/thejaswi.html">thejaswi</a>
        </address>
<p>In <a href="/category/rst.html">rst</a>.</p>
<p>tags: <a href="/tag/terminal.html">terminal</a> </p>
</footer><!-- /.post-info -->                <p class="first last">Here at Agiliq, we also develop cross-platform HTML5 mobile applications. Using Eclipse to create an android project (one time task) and edit html and javascript files for an android app is an overkill. Wouldn't it be great, if you could use your favourite text editor to edit html and js files and then fall back to the terminal to deploy the android app? We are going to see exactly this in the post. First, let's install the android SDK starter package(I assume that you have installed JDK and ant). Head over <a class="reference external" href="http://developer.android.com/sdk/index.html">here</a> and install the SDK for your platform. Since</p>

                <a class="readmore" href="/developing-android-applications-from-command-line.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/deploying-django-apps-on-heroku-2.html" rel="bookmark"
                           title="Permalink to Deploying Django apps on Heroku">Deploying Django apps on Heroku</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-02-04T00:00:01+05:30">
                Published: Sat 04 February 2012
        </abbr>
		<br />
        <abbr class="modified" title="2012-02-22T02:10:49+05:30">
                Updated: Wed 22 February 2012
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/shabda.html">shabda</a>
        </address>
<p>In <a href="/category/rst.html">rst</a>.</p>
<p>tags: <a href="/tag/django.html">django</a> </p>
</footer><!-- /.post-info -->                <p class="first last">Read this first: <a class="reference external" href="http://devcenter.heroku.com/articles/django">http://devcenter.heroku.com/articles/django</a>. This is a great article by the Heroku. I am just filling in some more details and making this step-by-step. 1. Get your Django project code. 2. Create a virtualenv with a no-site-packages command :: virtualenv vent --no-site-packages 3. Install Django, psycopg2 (postgres connector), gunicorn and any other required Django libraries. 4. Confirm that you have all the required libraries and you can run your code locally using <tt class="docutils literal">manage.py runserver</tt>. 5. Create a requirement.txt by using :: pip freeze &gt; requirements.txt 6. Make sure you have a requirements.txt at the root of your repo. Heroku uses</p>

                <a class="readmore" href="/deploying-django-apps-on-heroku-2.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/behind-the-scenes-request-to-response.html" rel="bookmark"
                           title="Permalink to Behind the Scenes: Request to Response">Behind the Scenes: Request to Response</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-01-02T18:00:00+05:30">
                Published: Mon 02 January 2012
        </abbr>
		<br />
        <abbr class="modified" title="2012-01-03T02:30:00+05:30">
                Updated: Tue 03 January 2012
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/thejaswi.html">thejaswi</a>
        </address>
<p>In <a href="/category/rst.html">rst</a>.</p>
<p>tags: <a href="/tag/response.html">response</a> </p>
</footer><!-- /.post-info -->                <p class="first last">In the previous installment of &quot;Behind the Scenes&quot;, we saw how the control flows from <a class="reference external" href="http://agiliq.com/blog/2011/09/behind-the-scenes-from-html-form-to-storage/">Form to File Storage</a>. Today, we are going to see how the application reacts from request to response. In this post, we are going to assume that we are using django's inbuilt <tt class="docutils literal">runserver</tt>. The flow doesn't change much for other WSGI servers available. When you invoke the <tt class="docutils literal">runserver</tt> management command, the command line options are validated and an instance of <a class="reference external" href="https://code.djangoproject.com/browser/django/trunk/django/core/servers/basehttp.py#L113">WSGIServer</a> is created and passed the <a class="reference external" href="https://code.djangoproject.com/browser/django/trunk/django/core/servers/basehttp.py#L130">WSGIRequestHandler</a>, which is used to create the request object (<a class="reference external" href="https://code.djangoproject.com/browser/django/trunk/django/core/handlers/wsgi.py#L128">WSGIRequest</a>). After the request object is created and the request</p>

                <a class="readmore" href="/behind-the-scenes-request-to-response.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 3
        <a href="/category/rst2.html">&raquo;</a>
</p>
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>