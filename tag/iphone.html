<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>agiliq_blog - iphone</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">agiliq_blog </a></h1>
                <nav><ul>
                    <li><a href="/category/html.html">html</a></li>
                    <li><a href="/category/markdown.html">markdown</a></li>
                    <li><a href="/category/rst.html">rst</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/getting-started-with-titanium-development.html">Getting started with Titanium development for Android and Iphone</a></h1>
<footer class="post-info">
        <abbr class="published" title="2011-02-08T10:59:38+05:30">
                Published: Tue 08 February 2011
        </abbr>
		<br />
        <abbr class="modified" title="2011-02-08T11:54:11+05:30">
                Updated: Tue 08 February 2011
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/shabda.html">shabda</a>
        </address>
<p>In <a href="/category/markdown.html">markdown</a>.</p>
<p>tags: <a href="/tag/iphone.html">iphone</a> </p>
</footer><!-- /.post-info --><p>This is the third post in our mobile app development series. ( You may want to read <a href="http://agiliq.com/blog/2011/02/getting-started-with-phonegap-using-xcode-for-mobi/">Phonegap</a> and <a href="http://agiliq.com/blog/2011/02/starting-android-app-developement-from-zero-to-app/">Android with Java</a>.)</p>
<p>Like last time we will build an App which allows calculating the tax payable, <a href="http://en.wikipedia.org/wiki/Income_tax_in_India">per the rules here</a>. We will
use <a href="http://www.appcelerator.com/products/titanium-mobile-application-development/">Titanium Mobile</a></p>
<h2>Installing Titanium</h2>
<p><a href="http://www.appcelerator.com/products/download/">Download and install</a> the fairly small Titanium from their sites. Once you download and start it, 
it will download and install more components. You can then create a new project from their UI.</p>
<h2>Layout the Layout</h2>
<p>You can add UI widgets and lay them out using Javascript. You need to use Titanium's API, to create
the UI. </p>
<p>Titanium execution starts in app.js. We will modify this file to add the layout code.</p>
<p>You can add a label like this</p>
<div class="highlight"><pre><span></span>Titanium.UI.createLabel({
    color:&#39;#999&#39;,
    text:label_text,
    font:{fontSize:20,fontFamily:&#39;Helvetica Neue&#39;},
    textAlign:&#39;left&#39;,
    width: &#39;auto&#39;,
    height: &#39;auto&#39;,
    top: 5
});
</pre></div>


<p>Similarly you can create a Button and TextInput as</p>
<div class="highlight"><pre><span></span>Titanium.UI.createTextField(
{
....
}
);

Titanium.UI.createButton({
    ...[Options]
})
</pre></div>


<p>Create a window as <code>Titanium.UI.createWindow({})</code>. and add these Items to it via <code>window.add</code>. Your widgets have been added to the UI, and should show up, in the simulator. <a href="http://skitch.com/shabda/rpue1/ios-simulator">Here is what mine looks like</a>. <a href="https://github.com/agiliq/TaxCalculatorTitanium/blob/master/Resources/app.js">You can get the code for the layout at here</a>. </p>
<h2>Code the code</h2>
<p>We now need to add the code to handle button clicks, calculate the tax, and update the UI with the tax. Since our code for this is going to be 
Javascript, we can easily reuse the tax calculation parts from our Phonegap app.</p>
<div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">getTax</span><span class="p">(</span><span class="nx">taxableIncome</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">taxOnThisSlab</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">taxableIncome</span> <span class="o">&lt;</span> <span class="mi">160000</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
 <span class="c1">///More code to calculate the tax</span>
<span class="c1">//....</span>

<span class="p">}</span>


<span class="kd">function</span> <span class="nx">calculateTax</span><span class="p">(</span><span class="nx">income</span><span class="p">,</span> <span class="nx">investment</span><span class="p">,</span> <span class="nx">infra_investment</span><span class="p">,</span> <span class="nx">housing_interest</span><span class="p">,</span> <span class="nx">medical_premium</span><span class="p">){</span>
    <span class="nx">investment</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">investment</span><span class="p">,</span> <span class="mi">100000</span><span class="p">));</span>
     <span class="c1">///More code to calculate the tax</span>
    <span class="c1">//....</span>

<span class="p">}</span>
</pre></div>


<p>Now we add a <code>EventListener</code> to the Button we added and this is used to calculate the tax and update the Label for showing the text.</p>
<div class="highlight"><pre><span></span>calculateTaxBut.addEventListener(&quot;click&quot;, function(){
    var income = income_f.value;
    var investment = investment_f.value;
    //More code to get the values and update the tax area.
    //.....
    var tax = calculateTax(income, investment, infra_investment, housing_interest, medical_premium);
    calculated_tax.text = &quot;&quot;+tax;

});
</pre></div>


<h2>And we are done</h2>
<p>Overall, the experience with Titanium was <strong>OK</strong>. The Titanium developer UI could have been better, the UI 
is Unintuitive. Building for Android is very slow. Lunch button in their developer UI seems to stop working at random intervals.
However the promise of building native apps is very alluring, and I would be working more with Titanium.</p>
<h2>Resources</h2>
<ol>
<li><a href="https://github.com/agiliq/TaxCalculatorTitanium">Finished code on Github</a></li>
<li>[Tutorial: Building the same app with Obj-c] - Todo</li>
<li><a href="http://agiliq.com/blog/2011/02/getting-started-with-phonegap-using-xcode-for-mobi/">Tutorial: Building the same app with Phonegap</a></li>
<li><a href="http://agiliq.com/blog/2011/02/starting-android-app-developement-from-zero-to-app/">Tutorial: Building the same app with Java:Android</a></li>
<li><a href="https://github.com/agiliq/TaxCalculatorPhoneGap">Code: Phonegap app on Github</a></li>
<li><a href="https://github.com/agiliq/TaxCalculatorAndroid">Code: Java app on Github</a></li>
<li><a href="https://github.com/agiliq/TaxCalculatorIndia">Code: Obj-C app on Github</a></li>
</ol>                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>